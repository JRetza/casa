<?xml version="1.0" encoding="UTF-8"?>
<?xml-stylesheet type="text/xsl" ?>
<casaxml xmlns="http://casa.nrao.edu/schema/psetTypes.html"
      xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
      xsi:schemaLocation="http://casa.nrao.edu/schema/casa.xsd
      file:///opt/casa/code/xmlcasa/xml/casa.xsd">

<task type="function" name="setjy">
	<description>
       The task places the model visibility amp and phase associated
       with a specified clean components image into the model column
       of the data set.  The flux density for point source
       (I,Q,U,V) can be entered explicitly.

       Models are available for 3C48, 3C138, 3C286 between
       1.4 and 43 GHz.  3C147 is available above 13 GHz.  These models
       are scaled to the precise frequency of the data.  Only I models are
       presently available.

       The location of the models are system dependent:  At the AOC, the
       models are in the directory::/usr/lib/casapy/data/nrao/VLA/CalModels/
       3C286_L.im (egs)

       Setjy need only be run on the calibrator sources with a know flux
       density and/or model.
	</description>
	<input>
		<param type="string" name="vis" mustexist="true">
			<description>Name of input visibility file (MS)</description>
			<value></value>
		</param>

		<param type="string" name="field">
			<description>Field name list or field ids list</description>
			<value></value>
		</param>

		<param type="string" name="spw">
			<description>Spectral window identifier (list)</description>
			<value></value>
		</param>

		<param type="string" name="modimage">
			<description>File location for field model</description>
			<value></value>
		</param>

		<param type="any" name="fluxdensity">
			<any type="variant" limittypes="int intArray doubleArray"/>
			<description>Specified flux density [I,Q,U,V]; -1 will lookup values</description>
			<value type="int">-1</value>
		</param>

		<param type="string" name="standard">
			<description>Flux density standard</description>
			<value>Perley-Taylor 99</value>
			<allowed kind="enum">
			<value>Perley-Taylor 99</value>
			<value>Baars</value>
			<value>Perley 90</value>
			<value>Perley-Taylor 95</value>
			</allowed>
		</param>

	</input>
<returns type="void"/>

<example>
      Fills the model column for flux density calibrators: 

       The task places the model visibility amp and phase associated
       with a specified clean components image into the model column
       of the data set.  The simplest way to to enter the flux density
       (I,Q,U,V) explicitly.

       Models are available for 3C48, 3C138, 3C286 between
       1.4 and 43 GHz.  3C147 is available above 13 GHz.  These models
       are scaled to the precise frequency of the data.  Only I models are
       presently available.

       The location of the models are system dependent:  At the AOC, the
       models are in the directory::/usr/lib/casapy/data/nrao/VLA/CalModels

       Setjy need only be run on the calibrator sources with a know flux
       density and/or model.

       Keyword arguments:
       vis -- Name of input visibility file
               default: none.  example: vis='ngc5921.ms'
       field -- Select field using field id(s) or field name(s).
                 [run listobs to obtain the list id's or names of calibrators]
              default: ''=all fields, but run setjy one field at a time.
              The field to add the model (by a source model) or the specified
                flux density

              If field string is a non-negative integer, it is assumed a field index
                otherwise, it is assumed a field name
              field='0~2'; field ids 0,1,2
              field='0,4,5~7'; field ids 0,4,5,6,7
              field='3C286,3C295'; field named 3C286 adn 3C295
              field = '3,4C*'; field id 3, all names starting with 4C
       spw -- Select spectral window/channels
              default: ''=all spectral windows and channels
              spw='0~2,4'; spectral windows 0,1,2,4 (all channels)
              spw='&lt;2';  spectral windows less than 2 (i.e. 0,1)
              spw='0:5~61'; spw 0, channels 5 to 61
              spw='0,10,3:3~45'; spw 0,10 all channels, spw 3, channels 3 to 45.
              spw='0~2:2~6'; spw 0,1,2 with channels 2 through 6 in each.
              spw='0:0~10;15~60'; spectral window 0 with channels 0-10,15-60
              spw='0:0~10,1:20~30,2:1;2;4'; spw 0, channels 0-10,
                       spw 1, channels 20-30, and spw 2, channels, 1,2 and 4
       modimage -- Optional model image (I only) from which the model visibilities
              are calculated and placed in the model column.  Each field must
              be done separately.  The image flux density will be scaled from the
              frequency in the model to that actually used.
              In Charlottesville and at the AOC, the models are located in the
              /usr/lib/casapy/data/nrao/VLA/CalModels.3C286_L.im (egs)
       fluxdensity -- Specified flux density [I,Q,U,V] in Jy
               default =&gt; -1, places [1,0,0,0] flux density for all sources.
               This is unnecessary and only flux density calibrators need be
               specified, one execution at a time.
               At present, this is the only method to insert a polarized flux
               density model (June 2008).
               example:  fluxdensity=[2.63,0.21,-0.33,0.02]
       standard -- Flux density standard, used if fluxdensity&lt;0
               default: 'Perley-Taylor 99'; example: standard='Baars'
               Options: 'Baars','Perley 90','Perley-Taylor 95',
                  'Perley-Taylor 99'
 </example>
 </task>
 </casaxml>
