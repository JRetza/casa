<?xml version="1.0" encoding="UTF-8"?>
<?xml-stylesheet type="text/xsl" ?>
<casaxml xmlns="http://casa.nrao.edu/schema/psetTypes.html"
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xsi:schemaLocation="http://casa.nrao.edu/schema/casa.xsd
file:///opt/casa/code/xmlcasa/xml/casa.xsd">


<task type="function" name="wvrgcal" category="calibration">

  <shortdescription>Generate a gain table based on Water Vapour Radiometer data</shortdescription>

  <input>

    <param type="string" name="vis" kind="ms" mustexist="true">
          <description>Name of input visibility file</description>
          <value></value>
    </param>

    <param type="string" name="caltable" mustexist="false">
          <description>Name of output gain calibration table</description>
          <value></value>
    </param>

    <param type="double" name="toffset">
          <description>Time offset (sec) between interferometric and WVR data</description>
          <value>0</value>
    </param>

    <param type="int" name="nsol">
          <description>Number of solutions for phase correction coefficients during this observation</description>
          <value>1</value>
    </param>

    <param type="bool" name="segsource">
          <description>Do a new coefficient calculation for each source</description>
          <value>True</value>
    </param>

    <param type="string" name="reversespw">
          <description>Reverse the sign of the correction for the listed SPWs</description>
          <value></value>
    </param>

    <param type="bool" name="disperse">
          <description>Apply correction for dispersion</description>
          <value>False</value>
    </param>

    <param type="bool" name="cont">
          <description>Estimate the continuum (e.g., due to clouds)</description>
          <value>False</value>
    </param>

    <param type="stringArray" name="wvrflag">
          <description>Flag the WVR data for these antenna(s) as bad and replace its data with interpolated values</description>
          <value></value>
    </param>

    <param type="stringArray" name="sourceflag">
          <description>Flag the WVR data for these source(s) as bad and do not produce corrections for it</description>
          <value></value>
    </param>

    <param type="string" name="statfield">
          <description>Compute the statistics (Phase RMS, Disc) on this field only</description>
          <value></value>
    </param>

    <param type="string" name="statsource">
          <description>>Compute the statistics (Phase RMS, Disc) on this source only</description>
          <value></value>
    </param>

    <param type="stringArray" name="tie">
          <description>Prioritise tieing the phase of these sources as well as possible</description>
          <value></value>
    </param>

    <param type="int" name="smooth">
          <description>Smooth WVR data by this many samples before applying the correction</description>
          <value>1</value>
    </param>

    <param type="double" name="scale">
          <description>Scale the entire phase correction by this factor</description>
          <value>1.</value>
    </param>

    </input>

  <returns type="bool"/>

  <example>

  vis -- Name of input visibility file
              default: none; example: vis='ngc5921.ms'

  caltable -- Name of output gain calibration table
              default: none; example: caltable='ngc5921.wvr'

  toffset -- Time offset (sec) between interferometric and WVR data
             default: 0

  nsol -- Number of solutions for phase correction coefficients during this observation
             default: 1

  segsource -- Do a new coefficient calculation for each source
             default: True

  reversespw -- Reverse the sign of the correction for the listed SPWs
             default: '' (none), example: reversespw='0~2,4'; spectral windows 0,1,2,4

  disperse -- Apply correction for dispersion
             default: False

  cont -- Estimate the continuum (e.g., due to clouds)
             default: False

  wvrflag -- Flag the WVR data for these antenna(s) as bad and replace its data with interpolated values
               default: [] (none) example: ['DV03','DA05','PM02']           

  sourceflag -- Flag the WVR data for these source(s) as bad and do not produce corrections for it
               default: [] (none) example: ['3C273']

  statfield -- Compute the statistics (Phase RMS, Disc) on this field only
               default: '' (all) 

  statsource -- Compute the statistics (Phase RMS, Disc) on this source only
               default: '' (all)             

  tie -- Prioritise tieing the phase of these sources as well as possible
                default: [] example: ['3C273,NGC253', 'IC433,3C279']

  smooth -- Smooth WVR data by this many samples before applying the correction
             default: 1 (no smoothing) example: 3

  scale -- Scale the entire phase correction by this factor
             default: 1. (no scaling)

  </example>

</task>

</casaxml>
