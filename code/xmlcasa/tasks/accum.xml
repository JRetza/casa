<?xml version="1.0" encoding="UTF-8"?>
<?xml-stylesheet type="text/xsl" ?>
<casaxml xmlns="http://casa.nrao.edu/schema/psetTypes.html"
      xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
      xsi:schemaLocation="http://casa.nrao.edu/schema/casa.xsd
      file:///opt/casa/code/xmlcasa/xml/casa.xsd">

<task type="function" name="accum">
	<shortdescription>Accumulate incremental calibration solutions into a calibration table</shortdescription>
	<description>

       Accum will interpolate and extrapolate a temporal calibration
       table onto a new table that has a regularly-space time grid.

       The first run of accum defines the time grid and fills this
       table with the results from the input table.

       Subsequent use of accum will combine additional calibration
       tables onto the same grid of the initial accum table to obtain
       an output accum table.  See below for a concrete example.

	</description>
	<input>
		<param type="string" name="vis" mustexist="true">
			<description>Name of input visibility file (MS)</description>
			<value></value>
		</param>

		<param type="string" name="tablein">
			<description>Input (cumulative) calibration table; use \'\' on first run</description>
			<value></value>
		</param>

		<param type="string" name="incrtable">
			<description>Input incremental calibration table to add</description>
			<value></value>
		</param>

		<param type="string" name="caltable">
			<description>Output (cumulative) calibration table</description>
			<value></value>
		</param>

		<param type="stringArray" name="field">
			<description>List of field names to process from tablein</description>
			<value></value>
		</param>

		<param type="stringArray" name="calfield">
			<description>List of field names to use from incrtable.</description>
			<value></value>
		</param>

		<param type="string" name="interp">
			<description>Interpolation mode to use for resampling incrtable solutions</description>
			<value>linear</value>
			<allowed kind="enum">
			   <value>linear</value>
			   <value>nearest</value>
			   <value>aipslin</value>
			</allowed>
		</param>

		<param type="any" name="accumtime" subparam="true">
			<any type="variant" limittypes="double int"/>
			<description>Timescale on which to create cumulative table</description>
			<value type="double">1.0</value>
		</param>

		<param type="intArray" name="spwmap">
			<description>Spectral window combinations to apply</description>
			<value>-1</value>
		</param>
                <constraints>
			<when param="tablein">
				<equals value="">
					<default param="accumtime"><value type="double">1.0</value></default>
				</equals>
			</when>
		</constraints>
	</input>
<returns type="void"/>

<example>

       Accum will interpolate and extrapolate a temporal calibration
       table onto a new table that has a regularly-space time grid.

       The first run of accum defines the time grid and fills this
       table with the results from the input table.

       Subsequent use of accum will combine additional calibration
       tables onto the same grid of the initial accum table to obtain
       an output accum table.  See below for a concrete example.
 </example>
 </task>
 </casaxml>

