<?xml version="1.0" encoding="UTF-8"?>
<?xml-stylesheet type="text/xsl" ?>
<casaxml xmlns="http://casa.nrao.edu/schema/psetTypes.html"
      xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
      xsi:schemaLocation="http://casa.nrao.edu/schema/casa.xsd
      file:///opt/casa/code/xmlcasa/xml/casa.xsd">

      <task type="function" name="csvclean" category="utilities">
	<shortdescription>Make a clean image using Hogbom and restore the residuals - For ALMA Commissioning</shortdescription>
	<description>Make a clean image and restore the residuals - For ALMA Commissioning
	</description>
	<input>
		<param type="string" vis="true" name="vis" mustexist="true">
			<description>Name of input visibility file</description>
			<value></value>
		</param>

		<param type="string" name="imagename">
			<description>Name of image</description>
			<value></value>
		</param>

        <param type="string" name="field">
             <description>Select field using field id(s) or field name(s)</description>
             <value type="string"></value>
        </param>

		<param type="any" name="spw">
	     	<description>Select spectral window/channels</description>
	     	<any type="variant" limittypes="string stringArray int intArray"/>
	     	<value type="string"></value>
		</param>

	    <param type="intArray" name="imsize">
		    <description>Image size in pixels (nx,ny), symmetric for single value</description>
		    <value type="vector">
	    <value>256</value><value>256</value>
		    </value>
	    </param>

	    <param type="doubleArray" name="cell" units="arcsec">
	    <description>The image cell size in arcseconds [x,y]. </description>
	    <value type="vector"><value>1.0</value><value>1.0</value></value>
	    </param>

		<param type="int" name="niter">
			<description>Maximum number of iterations</description>
			<value>500</value>
		</param>

		<param type="string" name="weighting">
			<description>Type of weighting</description>
			<value>natural</value>
		</param>

		<param type="stringArray" name="restoringbeam">
			<description>Output Gaussian restoring beam for CLEAN image</description>
	    <value type="vector"><value>0.5</value><value>0.5</value></value>
		</param>

		<param type="bool" name="interactive">
			<description>Use interactive clean (with GUI viewer)</description>
			<value>False</value>
		</param>


	</input>

<example>

        Make a clean image using Hogbom and restore the residuals

	Keyword arguments:
	vis -- Name of input visibility file
        	default: none; example: vis='ngc5921.ms' 
        	
	imagename -- Name of output CASA image
		         default: none; example: imagename='3C273XC1.image'
		         
	field -- Select fields in mosaic.  Use field id(s) or field name(s).
                  ['go listobs' to obtain the list id's or names]
              default: ''= all fields
              If field string is a non-negative integer, it is assumed to
                  be a field index otherwise, it is assumed to be a 
		  field name
              field='0~2'; field ids 0,1,2
              field='0,4,5~7'; field ids 0,4,5,6,7
              field='3C286,3C295'; field named 3C286 and 3C295
              field = '3,4C*'; field id 3, all names starting with 4C
              
	spw -- Select spectral window/channels
           NOTE: This selects the data passed as the INPUT to mode
           default: ''=all spectral windows and channels
                spw='0~2,4'; spectral windows 0,1,2,4 (all channels)
                spw='0:5~61'; spw 0, channels 5 to 61
                spw='&lt;2';   spectral windows less than 2 (i.e. 0,1)
                spw='0,10,3:3~45'; spw 0,10 all channels, spw 3, 
				   channels 3 to 45.
                spw='0~2:2~6'; spw 0,1,2 with channels 2 through 6 in each.
                spw='0:0~10;15~60'; spectral window 0 with channels 
				    0-10,15-60
                spw='0:0~10,1:20~30,2:1;2;3'; spw 0, channels 0-10,
                      spw 1, channels 20-30, and spw 2, channels, 1,2 and 3
                      
	imsize -- Image pixel size (x,y).  DOES NOT HAVE TO BE A POWER OF 2
               default = [256,256]; example: imsize=[350,350]
               imsize = 500 is equivalent to [500,500]
               If include outlier fields, e.g., [[400,400],[100,100]] or
               use outlierfile.
               Avoid odd-numbered imsize.

	cell -- Cell size (x,y)
               default= '1.0arcsec';
               example: cell=['0.5arcsec,'0.5arcsec'] or
               cell=['1arcmin', '1arcmin']
               cell = '1arcsec' is equivalent to ['1arcsec','1arcsec']
               NOTE:cell = 2.0 => ['2arcsec', '2arcsec']

	niter -- Maximum number iterations,
               if niter=0, then no CLEANing is done ("invert" only)
               default: 500; example: niter=5000

	weighting -- Weighting to apply to visibilities:
               default='natural'; example: weighting='uniform';
               Options: 'natural','uniform','briggs', 
                       'superuniform','briggsabs','radial'

	restoringbeam -- Output Gaussian restoring beam for CLEAN image
               [bmaj, bmin, bpa] elliptical Gaussian restoring beam
               default units are in arc-seconds for bmaj,bmin, degrees
               for bpa default: restoringbeam=[]; Use PSF calculated
               from dirty beam. 
               example: restoringbeam=['10arcsec'] circular Gaussian 
                        FWHM 10 arcseconds example:
                        restoringbeam=['10.0','5.0','45.0deg'] 10"x5" 
                        at 45 degrees
	
	interactive -- True expandable parameters
               npercycle -- this is the  number of iterations between each
                 interactive update of the mask.  It is important to modify
                 this number interactively during the cleaning, starting with
                 a low number like 20, but then increasing as more extended
                 emission is encountered.
               chaniter -- specify how interactive CLEAN is performed, 
                 default: chaniter=False;
                 example: chaniter=True; step through channels 
                  WARNING: The interactive clean with chaniter=True for
                    optical velocity mode
                    (mode='velocity' and veltype='optical') is
                    NOT YET IMPLEMENTED.
	
 </example>
 </task>
 </casaxml>
